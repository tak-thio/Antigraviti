# ワークフローとSkillsの連携について

ワークフローの中に特定のSkills（AIへの専門知識やルールの付与）を含めたり指定したりすることは**可能であり、非常に強力な応用テクニック**です。

## 連携の基本的な考え方

* **ワークフロー (`.agents/workflows/*.md`)**
  「いつ、どのような手順で作業を行うか」という**手続き（プロセス）**を定義するもの。
* **Skills (`.agents/skills/` などに配置されるルール群)**
  「その作業を行う際、どのような品質基準やノウハウを使うか」という**知識（ノウハウ）**を定義するもの。

この2つを連携させることで、「決まった手順（ワークフロー）」を「専門家の品質（Skills）」で自動実行させることができます。

## 連携の具体的な方法（3パターン）

### 1. ワークフロー内でSkillを直接参照する（最も推奨）
ワークフローのMarkdownファイル（`.md`）の中に、AIに対して「この手順を実行する際は、〇〇のSkill（ルールファイル）を読み込んでそれに従ってね」と明記する方法です。

**実装例 (`.agents/workflows/review.md` の場合):**
```markdown
# AIコードレビュー

## 手順
1. 現在の変更箇所（`git diff`）を取得する。
2. レビューを実行する。
   ※ 注意: レビューを行う際は、必ず `.agents/skills/react_best_practices.md` を読み込み、そこに記載されているReactのベストプラクティスと命名規則に厳密に従って評価すること。
3. 結果をユーザーに報告する。
```
**メリット:** ワークフローごとに適用したいSkillを柔軟に切り替えられる（React用レビュー、Python用レビューなど）。

### 2. プロジェクト全体にSkillを適用しておく（暗黙の連携）
プロジェクトのルートに特定のルールファイル（例: `cursorrules` に相当するような、AIが常に意識すべきルール）を置き、ワークフローは単に「作業手順」だけを記述する方法です。
AIはプロジェクト全体に適用されたSkillを常にバックグラウンドで意識しているため、ワークフロー実行時も自然とそのSkillが反映されます。
**メリット:** ワークフローファイルがシンプルに保てる。

### 3. ひな形作成ワークフロー（`/scaffold` 等）でSkill込みのテンプレートを展開する
先ほど話題に出た「プロジェクト初期化（テンプレート展開）」の応用です。
アプリ開発用、Web開発用など、種類ごとのテンプレートフォルダの中に**「その開発種別に特化した専用のSkillファイル群」も一緒に同梱しておく**方法です。
`/init` を実行すると、コードのひな形だけでなく、そのプロジェクトを開発していく上でAIが守るべきSkill（例：Flutterの強力な状態管理の書き方ルールなど）も同時にコピーされます。
**メリット:** プロジェクトの立ち上げと同時に、最適なAIアシスタントの頭脳（Skill）も自動セットアップされる。

---

## 結論
ワークフローの機能自体に「Skillを強制インクルードする専用の文法」があるわけではありません。しかし、**ワークフローの指示文の中に「〇〇のSkillファイルを参照せよ」と人間語で書くだけでAIはそれを理解して実行できる**ため、実質的にワークフローの中にSkillを組み込むことは完全に可能です。
